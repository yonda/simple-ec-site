<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨æ–‡å±¥æ­´ - æ›¸ç±ECã‚µã‚¤ãƒˆ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
        <div class="container">
            <h1>ğŸ“š æ›¸ç±ECã‚µã‚¤ãƒˆ</h1>
            <nav>
                <a href="index.html">å•†å“ä¸€è¦§</a>
                <a href="cart.html">ã‚«ãƒ¼ãƒˆ <span id="cart-count" class="badge">0</span></a>
                <a href="order-history.html">æ³¨æ–‡å±¥æ­´</a>
                <a href="#" onclick="logout(); return false;">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
            </nav>
        </div>
    </header>

    <!-- æ³¨æ–‡å±¥æ­´ -->
    <main class="container">
        <h2>æ³¨æ–‡å±¥æ­´</h2>

        <div id="order-history-content">
            <!-- JavaScriptã§ç”Ÿæˆ -->
        </div>
    </main>

    <footer>
        <p>&copy; 2025 æ›¸ç±ECã‚µã‚¤ãƒˆ</p>
    </footer>

    <script src="data.js"></script>
    <script src="utils.js"></script>
    <script>
        // ãƒ­ã‚°ã‚¤ãƒ³ãƒã‚§ãƒƒã‚¯
        const user = getCurrentUser();
        if (!user) {
            alert('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚');
            window.location.href = 'login.html';
        }

        function displayOrderHistory() {
            const content = document.getElementById('order-history-content');

            if (orderHistory.length === 0) {
                content.innerHTML = '<p class="no-results">æ³¨æ–‡å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }

            let html = '<div class="order-list">';

            orderHistory.forEach(order => {
                html += `
                    <div class="order-item" onclick="window.location.href='order-detail.html?id=${order.id}'">
                        <h3>æ³¨æ–‡ç•ªå·: ${order.id}</h3>
                        <div class="meta">
                            <p>æ³¨æ–‡æ—¥: ${order.date}</p>
                            <p>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${order.status}</p>
                        </div>
                        <p style="font-size: 1.2rem; font-weight: bold; color: #e74c3c;">
                            åˆè¨ˆ: Â¥${order.total.toLocaleString()}
                        </p>
                    </div>
                `;
            });

            html += '</div>';
            content.innerHTML = html;
        }

        displayOrderHistory();
    </script>
</body>
</html>
