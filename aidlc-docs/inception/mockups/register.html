<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°è¦ç™»éŒ² - æ›¸ç±ECã‚µã‚¤ãƒˆ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
        <div class="container">
            <h1>ğŸ“š æ›¸ç±ECã‚µã‚¤ãƒˆ</h1>
            <nav>
                <a href="index.html">å•†å“ä¸€è¦§</a>
                <a href="cart.html">ã‚«ãƒ¼ãƒˆ <span id="cart-count" class="badge">0</span></a>
                <a href="login.html">ãƒ­ã‚°ã‚¤ãƒ³</a>
                <a href="register.html">æ–°è¦ç™»éŒ²</a>
            </nav>
        </div>
    </header>

    <!-- æ–°è¦ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
    <main class="container">
        <div class="form-container">
            <h2 style="text-align: center; margin-bottom: 2rem;">æ–°è¦ç™»éŒ²</h2>

            <div id="error-message"></div>

            <form id="register-form">
                <div class="form-group">
                    <label for="name">ãŠåå‰ *</label>
                    <input type="text" id="name" required>
                </div>

                <div class="form-group">
                    <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *</label>
                    <input type="email" id="email" required>
                </div>

                <div class="form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ *</label>
                    <input type="password" id="password" required minlength="8" placeholder="8æ–‡å­—ä»¥ä¸Š">
                </div>

                <div class="form-group">
                    <label for="password-confirm">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰ *</label>
                    <input type="password" id="password-confirm" required minlength="8">
                </div>

                <div class="form-group">
                    <label for="zipcode">éƒµä¾¿ç•ªå· *</label>
                    <input type="text" id="zipcode" required placeholder="123-4567">
                </div>

                <div class="form-group">
                    <label for="address">ä½æ‰€ *</label>
                    <input type="text" id="address" required>
                </div>

                <div class="form-group">
                    <label for="phone">é›»è©±ç•ªå· *</label>
                    <input type="tel" id="phone" required placeholder="090-1234-5678">
                </div>

                <button type="submit" class="btn btn-success" style="width: 100%;">ç™»éŒ²ã™ã‚‹</button>
            </form>

            <p style="text-align: center; margin-top: 1.5rem;">
                æ—¢ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯<a href="login.html" style="color: #3498db;">ã“ã¡ã‚‰</a>
            </p>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 æ›¸ç±ECã‚µã‚¤ãƒˆ</p>
    </footer>

    <script src="data.js"></script>
    <script src="utils.js"></script>
    <script>
        document.getElementById('register-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const passwordConfirm = document.getElementById('password-confirm').value;
            const name = document.getElementById('name').value;

            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (password !== passwordConfirm) {
                document.getElementById('error-message').innerHTML = `
                    <div class="error-message">
                        ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“
                    </div>
                `;
                return;
            }

            if (password.length < 8) {
                document.getElementById('error-message').innerHTML = `
                    <div class="error-message">
                        ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>
                `;
                return;
            }

            // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ãƒã‚§ãƒƒã‚¯
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                document.getElementById('error-message').innerHTML = `
                    <div class="error-message">
                        æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>
                `;
                return;
            }

            // ãƒ¢ãƒƒã‚¯ç™»éŒ²ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯å®Ÿéš›ã®ç™»éŒ²APIã‚’ä½¿ç”¨ï¼‰
            // æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
            if (email === 'test@example.com') {
                document.getElementById('error-message').innerHTML = `
                    <div class="error-message">
                        ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™
                    </div>
                `;
                return;
            }

            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æˆåŠŸï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
            const user = {
                id: Date.now(),
                email: email,
                name: name,
                zipCode: document.getElementById('zipcode').value,
                address: document.getElementById('address').value,
                phone: document.getElementById('phone').value
            };

            setCurrentUser(user);
            alert('ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼');
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>
