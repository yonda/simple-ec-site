# ユーザーストーリー - シンプル EC サイト（書籍販売）

## プロジェクト概要

書籍を販売するシンプルな EC サイトを構築する。ゲストユーザーも登録済みユーザーも購入可能。決済はモック実装。在庫管理は自動で行う。

## アクター

- **ゲストユーザー**：未登録の訪問者
- **登録済みユーザー**：アカウントを持つユーザー
- **システム**：自動処理を実行するバックエンド

---

## 1. 商品カタログ関連

### US-001: 商品一覧表示

**ストーリー**
> ゲストユーザーとして、販売中の書籍一覧を閲覧したい。なぜなら、購入する書籍を探すため。

**受け入れ基準**
- [ ] 商品一覧ページが表示される
- [ ] 各書籍について、書籍画像、タイトル、著者名、価格、在庫状態が表示される
- [ ] 在庫切れの書籍も表示されるが、「在庫切れ」と明示される
- [ ] 一覧は読み込み可能な形式で表示される（ページネーションまたはスクロール）

**優先度**: 高（MVP）

---

### US-002: 商品詳細表示

**ストーリー**
> ゲストユーザーとして、書籍の詳細情報を閲覧したい。なぜなら、購入前に書籍の詳細を確認したいため。

**受け入れ基準**
- [ ] 商品一覧から書籍をクリックすると、詳細ページに遷移する
- [ ] 書籍画像、タイトル、著者名、出版社、ISBN、価格、在庫数、説明文が表示される
- [ ] 在庫がある場合、「カートに追加」ボタンが表示される
- [ ] 在庫切れの場合、「在庫切れ」と表示され、購入ボタンは無効化される

**優先度**: 高（MVP）

---

### US-003: 商品検索

**ストーリー**
> ゲストユーザーとして、キーワードで書籍を検索したい。なぜなら、特定の書籍を素早く見つけたいため。

**受け入れ基準**
- [ ] 検索ボックスがページ上部に表示される
- [ ] キーワードを入力して検索できる
- [ ] タイトル、著者名に部分一致する書籍が表示される
- [ ] 検索結果が0件の場合、「該当する書籍が見つかりませんでした」と表示される
- [ ] 検索結果は商品一覧と同じ形式で表示される

**優先度**: 高（MVP）

---

### US-004: 商品フィルタリング

**ストーリー**
> ゲストユーザーとして、書籍をカテゴリや価格帯でフィルタリングしたい。なぜなら、条件に合う書籍を効率的に見つけたいため。

**受け入れ基準**
- [ ] カテゴリ（ジャンル）でフィルタリングできる（例：技術書、小説、ビジネス書など）
- [ ] 価格帯でフィルタリングできる（例：〜1000円、1000〜3000円、3000円〜）
- [ ] 在庫状態でフィルタリングできる（在庫あり/すべて）
- [ ] 複数のフィルタを組み合わせて使用できる
- [ ] フィルタ結果は商品一覧と同じ形式で表示される

**優先度**: 高（MVP）

---

## 2. ショッピングカート関連

### US-005: カートへの商品追加

**ストーリー**
> ゲストユーザーとして、書籍をショッピングカートに追加したい。なぜなら、購入する書籍をまとめたいため。

**受け入れ基準**
- [ ] 商品詳細ページに「カートに追加」ボタンが表示される
- [ ] 数量を指定してカートに追加できる
- [ ] カートに追加すると、「カートに追加しました」というメッセージが表示される
- [ ] ヘッダーのカートアイコンに、カート内の商品数が表示される
- [ ] 在庫数を超える数量は追加できない

**優先度**: 高（MVP）

---

### US-006: カート内容表示

**ストーリー**
> ゲストユーザーとして、カートの内容を確認したい。なぜなら、購入前に選択した書籍と合計金額を確認したいため。

**受け入れ基準**
- [ ] カートページが表示される
- [ ] カート内の各書籍について、書籍画像、タイトル、価格、数量、小計が表示される
- [ ] カート内の商品の合計金額が表示される
- [ ] カートが空の場合、「カートは空です」と表示される
- [ ] 「レジに進む」ボタンが表示される

**優先度**: 高（MVP）

---

### US-007: カート内商品の数量変更

**ストーリー**
> ゲストユーザーとして、カート内の書籍の数量を変更したい。なぜなら、購入する冊数を調整したいため。

**受け入れ基準**
- [ ] カートページで各書籍の数量を変更できる
- [ ] 数量を変更すると、小計と合計金額が自動的に更新される
- [ ] 在庫数を超える数量には変更できない
- [ ] 数量を0にすると、その商品はカートから削除される

**優先度**: 高（MVP）

---

### US-008: カートからの商品削除

**ストーリー**
> ゲストユーザーとして、カートから書籍を削除したい。なぜなら、購入しない書籍をカートから取り除きたいため。

**受け入れ基準**
- [ ] カートページで各書籍に「削除」ボタンが表示される
- [ ] 「削除」ボタンをクリックすると、その商品がカートから削除される
- [ ] 削除後、合計金額が更新される
- [ ] すべての商品を削除すると、「カートは空です」と表示される

**優先度**: 高（MVP）

---

## 3. 注文・決済関連

### US-009: 注文確認

**ストーリー**
> ゲストユーザーとして、注文内容を確認したい。なぜなら、決済前に注文内容に誤りがないか確認したいため。

**受け入れ基準**
- [ ] カートページの「レジに進む」ボタンをクリックすると、注文確認ページに遷移する
- [ ] 注文する書籍の一覧と合計金額が表示される
- [ ] 配送先住所の入力フォームが表示される（氏名、郵便番号、住所、電話番号）
- [ ] 「注文を確定する」ボタンが表示される

**優先度**: 高（MVP）

---

### US-010: 決済処理（モック）

**ストーリー**
> ゲストユーザーとして、注文を確定して決済したい。なぜなら、書籍を購入したいため。

**受け入れ基準**
- [ ] 注文確認ページで「注文を確定する」ボタンをクリックできる
- [ ] ボタンをクリックすると、決済処理（モック）が実行される
- [ ] 決済は常に成功したものとして扱われる（実際の決済処理は行わない）
- [ ] 決済成功後、注文完了ページに遷移する
- [ ] システムは購入された書籍の在庫を自動的に減算する

**優先度**: 高（MVP）

---

### US-011: 注文完了確認

**ストーリー**
> ゲストユーザーとして、注文が完了したことを確認したい。なぜなら、購入が正常に処理されたことを知りたいため。

**受け入れ基準**
- [ ] 注文完了ページが表示される
- [ ] 「ご注文ありがとうございます」というメッセージが表示される
- [ ] 注文番号、注文日時、注文内容、配送先住所、合計金額が表示される
- [ ] 登録済みユーザーの場合、「注文履歴はこちら」というリンクが表示される
- [ ] 「トップページに戻る」ボタンが表示される

**優先度**: 高（MVP）

---

## 4. ユーザー管理関連

### US-012: ユーザー登録

**ストーリー**
> ゲストユーザーとして、アカウントを作成したい。なぜなら、注文履歴を確認したいため。

**受け入れ基準**
- [ ] ユーザー登録ページが表示される
- [ ] メールアドレス、パスワード、氏名、郵便番号、住所、電話番号を入力できる
- [ ] パスワードは8文字以上必要
- [ ] メールアドレスは有効な形式である必要がある
- [ ] 登録ボタンをクリックすると、アカウントが作成される
- [ ] 既に登録済みのメールアドレスの場合、エラーメッセージが表示される
- [ ] 登録成功後、自動的にログインされる

**優先度**: 高（MVP）

---

### US-013: ログイン

**ストーリー**
> 登録済みユーザーとして、ログインしたい。なぜなら、注文履歴を確認したいため。

**受け入れ基準**
- [ ] ログインページが表示される
- [ ] メールアドレスとパスワードを入力できる
- [ ] ログインボタンをクリックすると、認証が行われる
- [ ] 認証成功時、トップページに遷移する
- [ ] 認証失敗時、「メールアドレスまたはパスワードが正しくありません」と表示される
- [ ] ログイン後、ヘッダーに「マイページ」リンクが表示される

**優先度**: 高（MVP）

---

### US-014: ログアウト

**ストーリー**
> 登録済みユーザーとして、ログアウトしたい。なぜなら、セキュリティを保ちたいため。

**受け入れ基準**
- [ ] ログイン後、ヘッダーに「ログアウト」ボタンが表示される
- [ ] ログアウトボタンをクリックすると、ログアウトされる
- [ ] ログアウト後、トップページに遷移する
- [ ] ログアウト後、「マイページ」リンクは非表示になる

**優先度**: 高（MVP）

---

## 5. 注文履歴関連

### US-015: 注文履歴一覧表示

**ストーリー**
> 登録済みユーザーとして、過去の注文履歴を閲覧したい。なぜなら、何を購入したか確認したいため。

**受け入れ基準**
- [ ] マイページに「注文履歴」リンクが表示される
- [ ] 注文履歴ページに、過去の注文一覧が表示される
- [ ] 各注文について、注文番号、注文日時、合計金額、注文状態が表示される
- [ ] 注文は新しい順に表示される
- [ ] 注文がない場合、「注文履歴はありません」と表示される
- [ ] ゲストユーザーの場合、この機能は利用できない

**優先度**: 高（MVP）

---

### US-016: 注文詳細表示

**ストーリー**
> 登録済みユーザーとして、注文の詳細を閲覧したい。なぜなら、特定の注文内容を確認したいため。

**受け入れ基準**
- [ ] 注文履歴一覧から注文をクリックすると、注文詳細ページに遷移する
- [ ] 注文番号、注文日時、配送先住所が表示される
- [ ] 注文した書籍の一覧（書籍画像、タイトル、価格、数量、小計）が表示される
- [ ] 合計金額が表示される
- [ ] 「注文履歴に戻る」ボタンが表示される

**優先度**: 高（MVP）

---

## 6. 在庫管理関連（システム）

### US-017: 購入時の在庫自動減算

**ストーリー**
> システムとして、注文確定時に書籍の在庫を自動的に減算したい。なぜなら、在庫の整合性を保つため。

**受け入れ基準**
- [ ] 注文が確定すると、購入された各書籍の在庫数が自動的に減算される
- [ ] 在庫数が0になった書籍は「在庫切れ」状態になる
- [ ] トランザクション処理により、データの整合性が保たれる
- [ ] 同時に複数の注文があっても、在庫が正しく管理される

**優先度**: 高（MVP）

---

### US-018: 在庫切れ商品の表示制御

**ストーリー**
> システムとして、在庫切れの書籍を適切に表示したい。なぜなら、ユーザーに在庫状態を正しく伝えるため。

**受け入れ基準**
- [ ] 在庫が0の書籍には「在庫切れ」と表示される
- [ ] 在庫切れの書籍は商品一覧に表示されるが、グレーアウトされる
- [ ] 在庫切れの書籍の詳細ページでは、「カートに追加」ボタンが無効化される
- [ ] 在庫切れの書籍はカートに追加できない

**優先度**: 高（MVP）

---

### US-019: 在庫状態の表示

**ストーリー**
> システムとして、書籍の在庫状態をリアルタイムで表示したい。なぜなら、ユーザーに正確な在庫情報を提供するため。

**受け入れ基準**
- [ ] 商品一覧と商品詳細ページで、在庫状態が表示される
- [ ] 在庫数が表示される（例：「在庫：5冊」）
- [ ] 在庫が少ない場合（例：5冊以下）、「残りわずか」と表示される
- [ ] 在庫が0の場合、「在庫切れ」と表示される

**優先度**: 高（MVP）

---

## ストーリーマップ（優先度順）

### フェーズ 1: MVP（最小実行可能製品）
すべてのユーザーストーリー（US-001 〜 US-019）がMVPに含まれます。

### 実装順序の推奨

1. **商品カタログ（基礎）**: US-001, US-002
2. **検索・フィルタリング**: US-003, US-004
3. **ショッピングカート**: US-005, US-006, US-007, US-008
4. **在庫管理（システム）**: US-017, US-018, US-019
5. **注文・決済**: US-009, US-010, US-011
6. **ユーザー管理**: US-012, US-013, US-014
7. **注文履歴**: US-015, US-016

---

## 非機能要件

- **パフォーマンス**: 商品一覧ページは3秒以内に読み込まれること
- **セキュリティ**: パスワードはハッシュ化して保存すること
- **ユーザビリティ**: レスポンシブデザインでモバイルでも利用可能であること
- **可用性**: 開発環境ではローカルで動作すること
- **データ**: 初期データとして、最低20冊の書籍データが必要

---

## 用語集

- **ゲストユーザー**: アカウント登録していない訪問者
- **登録済みユーザー**: アカウントを作成したユーザー
- **書籍**: 販売する商品（物理的な本）
- **在庫**: 販売可能な書籍の数量
- **在庫切れ**: 在庫数が0の状態
- **カート**: 購入予定の書籍を一時的に保存する場所
- **注文**: 購入の確定
- **決済**: 支払い処理（本システムではモック実装）
